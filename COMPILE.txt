
This file has two sections:

1. How to compile the Tkhtml widget.
2. How to run Hv3, the Tkhtml web browser.

--------------------------------------------------------------------------------

1. HOW TO COMPILE THE TKHTML WIDGET

  There are two ways to build the Tkhtml widget:
  
    * Using the compile.py script. This is *very* quick and easy if it works,
      virtually impossible to debug if it doesn't.
    * Using the configure script. This is quick and easy if it works,
      virtually impossible to debug if it doesn't.
    * Modifying the Makefile template. This takes a few minutes to set up, 
      but it's easier to understand what's going on.
  
  Both systems have been tested on Suse linux 9.2 and Mingw/Msys on Windows XP.

  Using the compile script
  --------------------------
  
  1. Run the "compile.py" script located in the htmlwidget directory. Hope for the best.
  
  Using the configure script
  --------------------------
  
  1. If you're reading this you have already obtained the sources and they are likely in a directory called "htmlwidget".
  2. Create a new empty directory to build in.
  3. Cd into the new directory.
  4. Run the "configure" script located in the htmlwidget directory. The configure script will probably need the --with-tcl and --with-tk options passed to it. 
  5. Run "make".
  6. If everything worked, run "make install".
  
  The sequence of commands might look like this:
  
    $ tar -xzf tkhtml-3.alpha1.tar.gz
    $ ls -o htmlwidget/configure -rwxr-xr-x  1 user 233035 2005-07-06 17:37 htmlwidget/configure
    $ mkdir bld
    $ cd bld
    $ ../htmlwidget/configure --with-tcl=/usr/local/ActiveTcl/lib --with-tk=/usr/local/ActiveTcl/lib 
    <much output>
    $ make
    $ make install
  
  Modifying a Makefile template
  -----------------------------
  
  There are two similar makefiles in the root directory of the source tree.
  "main.mk" is for linux, and "mingw.mk" is for Mingw/Msys on windows. Both
  require a handful of variables to be modified before they can be used.
  Instructions are in comments in either file.
  
  1. If you're reading this you have already obtained the sources and they are likely in a directory called "htmlwidget".
  2. Edit the appropriate makefile ("linux-gcc.mk" or "mingw.mk").
  2. Create a new empty directory to build in.
  3. Cd into the new directory.
  5. Run "make".
  6. If everything worked, run "make install" (linux only).
  
  The sequence of commands might look like this:
  
    $ tar -xzf tkhtml-3.alpha1.tar.gz
    $ ls -o htmlwidget/main.mk -rw-r--r--  1 dan 4143 2005-07-10 19:45 htmlwidget/main.mk
    $ vi htmlwidget/main.mk
    $ mkdir bld
    $ cd bld
    $ make -f ../htmlwidget/main.mk
    <much output>
    $ make install

2. HOW TO RUN HV3, THE TKHTML WEB BROWSER

  Hv3 uses the following compiled components:

  * Tkhtml3
  * Tls
  * Img
  * Sqlite3
  * tclsee (requires: QuickJS and optionally GC)

  Compiling Tclsee (javascript support)
  -------------------------------------

    When Hv3 is run, it tries to load package "Tclsee". If successful,
    javascript support will be enabled. Tclsee is an extension developed
    as part of Hv3 to provide access to the "QuickJS Javascript Engine" 
    library from Tcl scripts.

    The QuickJS library depends on the Boehm garbage-collector libary. To build
    "Tclsee", the following third-party components are required:
  
      QuickJS:  https://bellard.org/quickjs/
      Boehm GC: http://www.hpl.hp.com/personal/Hans_Boehm/gc/
  
    Libraries need to be built from these two packages (files libquickjs.a 
    and libgc.a). Refer to the respective package documentation for 
    details on how to do that.
  
    Then, file "hv/hv3qjs.c" from the source distribution should be compiled
    into a shared object linked with the two libraries above. The shared
    object will contain the binary extension "Tclsee" (C init function
    Tclsee_Init). 
  
    The template makefiles (linux-gcc.mk and mingw.mk) include a target
    "tclsee" to build this package, complete with pkgIndex.tcl file. This
    target requires configuration of makefile variables JSLIB, JSFLAGS and
    JS_SHARED_LIB.
  
  
  Compiling hv3_polipo
  --------------------

    TODO


3. NOTES FOR CROSS COMPILING

    One way to build Tkhtml3 and/or Hv3 for windows is to use a cross
    compiler from Linux using mingw. Binaries for the mingw gcc are 
    available here:

        http://mirzam.it.vu.nl/mingw/

    Note: If anyone reading this knows how to cross-compile from linux
    for mac, please tell me! (danielk1977@gmail.com)


